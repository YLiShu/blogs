<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ц╡Еш░ИPromise | щ╗ОхнРЁЯМ░чаБхвГ</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="description" content="хЬиф╗гчаБчЪДш┐╖холф╕нчй┐цвня╝Мф╣жхЖЩчЭАцФ╣хПШчФЯц┤╗чЪДцХ░хнЧчпЗчла">
    
    <link rel="preload" href="/blogs/assets/css/0.styles.d9a4f19e.css" as="style"><link rel="preload" href="/blogs/assets/js/app.b10d3b76.js" as="script"><link rel="preload" href="/blogs/assets/js/7.51cf2bb3.js" as="script"><link rel="preload" href="/blogs/assets/js/2.90913472.js" as="script"><link rel="preload" href="/blogs/assets/js/1.c35ebe2c.js" as="script"><link rel="preload" href="/blogs/assets/js/70.66e490da.js" as="script"><link rel="prefetch" href="/blogs/assets/js/10.51f51c0e.js"><link rel="prefetch" href="/blogs/assets/js/11.f1c4e2ce.js"><link rel="prefetch" href="/blogs/assets/js/14.90b34deb.js"><link rel="prefetch" href="/blogs/assets/js/15.cd05d3f7.js"><link rel="prefetch" href="/blogs/assets/js/16.0ca60d78.js"><link rel="prefetch" href="/blogs/assets/js/17.26773bd0.js"><link rel="prefetch" href="/blogs/assets/js/18.21df733a.js"><link rel="prefetch" href="/blogs/assets/js/19.eed3c532.js"><link rel="prefetch" href="/blogs/assets/js/20.4c76e8be.js"><link rel="prefetch" href="/blogs/assets/js/21.f18babb4.js"><link rel="prefetch" href="/blogs/assets/js/22.249f648e.js"><link rel="prefetch" href="/blogs/assets/js/23.cb41f22a.js"><link rel="prefetch" href="/blogs/assets/js/24.c95ba296.js"><link rel="prefetch" href="/blogs/assets/js/25.4a450405.js"><link rel="prefetch" href="/blogs/assets/js/26.b1851237.js"><link rel="prefetch" href="/blogs/assets/js/27.ab146b7f.js"><link rel="prefetch" href="/blogs/assets/js/28.83af5ecf.js"><link rel="prefetch" href="/blogs/assets/js/29.17c1b3c2.js"><link rel="prefetch" href="/blogs/assets/js/3.8ff04919.js"><link rel="prefetch" href="/blogs/assets/js/30.5a702d15.js"><link rel="prefetch" href="/blogs/assets/js/31.9b363f9c.js"><link rel="prefetch" href="/blogs/assets/js/32.df071e6e.js"><link rel="prefetch" href="/blogs/assets/js/33.83f13db0.js"><link rel="prefetch" href="/blogs/assets/js/34.a5e21847.js"><link rel="prefetch" href="/blogs/assets/js/35.caa9411a.js"><link rel="prefetch" href="/blogs/assets/js/36.0997f85f.js"><link rel="prefetch" href="/blogs/assets/js/37.41a69cda.js"><link rel="prefetch" href="/blogs/assets/js/38.11c97fc9.js"><link rel="prefetch" href="/blogs/assets/js/39.c7a91778.js"><link rel="prefetch" href="/blogs/assets/js/4.7ab60d34.js"><link rel="prefetch" href="/blogs/assets/js/40.788bd3bb.js"><link rel="prefetch" href="/blogs/assets/js/41.bfd620d2.js"><link rel="prefetch" href="/blogs/assets/js/42.a93d1dad.js"><link rel="prefetch" href="/blogs/assets/js/43.36e369c4.js"><link rel="prefetch" href="/blogs/assets/js/44.a8c7c1be.js"><link rel="prefetch" href="/blogs/assets/js/45.be0bd724.js"><link rel="prefetch" href="/blogs/assets/js/46.0eead14d.js"><link rel="prefetch" href="/blogs/assets/js/47.9c0b8ec3.js"><link rel="prefetch" href="/blogs/assets/js/48.fedde897.js"><link rel="prefetch" href="/blogs/assets/js/49.658232de.js"><link rel="prefetch" href="/blogs/assets/js/5.07521870.js"><link rel="prefetch" href="/blogs/assets/js/50.e75baace.js"><link rel="prefetch" href="/blogs/assets/js/51.39f09a2a.js"><link rel="prefetch" href="/blogs/assets/js/52.86d8775b.js"><link rel="prefetch" href="/blogs/assets/js/53.2bcea0af.js"><link rel="prefetch" href="/blogs/assets/js/54.80cfc079.js"><link rel="prefetch" href="/blogs/assets/js/55.575fad98.js"><link rel="prefetch" href="/blogs/assets/js/56.a9ac12aa.js"><link rel="prefetch" href="/blogs/assets/js/57.bc25fe73.js"><link rel="prefetch" href="/blogs/assets/js/58.a1f3dfda.js"><link rel="prefetch" href="/blogs/assets/js/59.acfc0f60.js"><link rel="prefetch" href="/blogs/assets/js/6.7070ea7f.js"><link rel="prefetch" href="/blogs/assets/js/60.cfc92fb7.js"><link rel="prefetch" href="/blogs/assets/js/61.566a8f66.js"><link rel="prefetch" href="/blogs/assets/js/62.1c3ab2d6.js"><link rel="prefetch" href="/blogs/assets/js/63.f1df4d25.js"><link rel="prefetch" href="/blogs/assets/js/64.349b7d3b.js"><link rel="prefetch" href="/blogs/assets/js/65.3e277b74.js"><link rel="prefetch" href="/blogs/assets/js/66.f985ae29.js"><link rel="prefetch" href="/blogs/assets/js/67.fecbf0ba.js"><link rel="prefetch" href="/blogs/assets/js/68.1f08c812.js"><link rel="prefetch" href="/blogs/assets/js/69.55f47746.js"><link rel="prefetch" href="/blogs/assets/js/8.8dfb1e90.js"><link rel="prefetch" href="/blogs/assets/js/9.18b271e2.js"><link rel="prefetch" href="/blogs/assets/js/vendors~docsearch.814a0df0.js">
    <link rel="stylesheet" href="/blogs/assets/css/0.styles.d9a4f19e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar" data-v-7dd95ae2><div data-v-7dd95ae2><div class="password-shadow password-wrapper-out" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>щ╗ОхнРЁЯМ░чаБхвГ</h3> <p class="description" data-v-59e6cb88>хЬиф╗гчаБчЪДш┐╖холф╕нчй┐цвня╝Мф╣жхЖЩчЭАцФ╣хПШчФЯц┤╗чЪДцХ░хнЧчпЗчла</p> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>щ╗ОхнР</span>
        ┬а┬а
        <!---->
        2023
      </a></span></div></div> <div class="hide" data-v-7dd95ae2><header class="navbar" data-v-7dd95ae2><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blogs/" class="home-link router-link-active"><img src="/blogs/avatar.jpg" alt="щ╗ОхнРЁЯМ░чаБхвГ" class="logo"> <span class="site-name">щ╗ОхнРЁЯМ░чаБхвГ</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blogs/" class="nav-link"><i class="undefined"></i>
  щжЦщб╡
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      хНЪхов
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/categories/хЙНчлп/" class="nav-link"><i class="undefined"></i>
  хЙНчлп
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/шобчоЧцЬ║ч╜Сч╗Ь/" class="nav-link"><i class="undefined"></i>
  шобчоЧцЬ║ч╜Сч╗Ь
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/чоЧц│Х/" class="nav-link"><i class="undefined"></i>
  чоЧц│Х
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/хнжцабшп╛чиЛ/" class="nav-link"><i class="undefined"></i>
  хнжцабшп╛чиЛ
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/щЭвшпХ/" class="nav-link"><i class="undefined"></i>
  щЭвшпХ
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/хРОчлп/" class="nav-link"><i class="undefined"></i>
  хРОчлп
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      щ╗ОхнРЁЯМ░Code
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3206591176245848" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  цОШщЗС
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/YLiShu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/blogs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-7dd95ae2></div> <aside class="sidebar" data-v-7dd95ae2><div class="personal-info-wrapper" data-v-1fad0c41 data-v-7dd95ae2><img src="/blogs/avatar.jpg" alt="author-avatar" class="personal-img" data-v-1fad0c41> <h3 class="name" data-v-1fad0c41>
    щ╗ОхнР
  </h3> <div class="num" data-v-1fad0c41><div data-v-1fad0c41><h3 data-v-1fad0c41>32</h3> <h6 data-v-1fad0c41>цЦЗчла</h6></div> <div data-v-1fad0c41><h3 data-v-1fad0c41>18</h3> <h6 data-v-1fad0c41>цаЗчн╛</h6></div></div> <ul class="social-links" data-v-1fad0c41></ul> <hr data-v-1fad0c41></div> <nav class="nav-links"><div class="nav-item"><a href="/blogs/" class="nav-link"><i class="undefined"></i>
  щжЦщб╡
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      хНЪхов
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blogs/categories/хЙНчлп/" class="nav-link"><i class="undefined"></i>
  хЙНчлп
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/шобчоЧцЬ║ч╜Сч╗Ь/" class="nav-link"><i class="undefined"></i>
  шобчоЧцЬ║ч╜Сч╗Ь
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/чоЧц│Х/" class="nav-link"><i class="undefined"></i>
  чоЧц│Х
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/хнжцабшп╛чиЛ/" class="nav-link"><i class="undefined"></i>
  хнжцабшп╛чиЛ
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/щЭвшпХ/" class="nav-link"><i class="undefined"></i>
  щЭвшпХ
</a></li><li class="dropdown-item"><!----> <a href="/blogs/categories/хРОчлп/" class="nav-link"><i class="undefined"></i>
  хРОчлп
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="undefined"></i>
      щ╗ОхнРЁЯМ░Code
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://juejin.cn/user/3206591176245848" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  цОШщЗС
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/YLiShu" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="undefined"></i>
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="/blogs/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div> <!----></nav> <!----> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-59e6cb88 data-v-7dd95ae2><h3 class="title" data-v-59e6cb88>ц╡Еш░ИPromise</h3> <!----> <label id="box" class="inputBox" data-v-59e6cb88><input type="password" value="" data-v-59e6cb88> <span data-v-59e6cb88>Konck! Knock!</span> <button data-v-59e6cb88>OK</button></label> <div class="footer" data-v-59e6cb88><span data-v-59e6cb88><i class="iconfont reco-theme" data-v-59e6cb88></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-59e6cb88>vuePress-theme-reco</a></span> <span data-v-59e6cb88><i class="iconfont reco-copyright" data-v-59e6cb88></i> <a data-v-59e6cb88><span data-v-59e6cb88>щ╗ОхнР</span>
        ┬а┬а
        <!---->
        2023
      </a></span></div></div> <div data-v-7dd95ae2><div data-v-7dd95ae2><main class="page"><section style="display:;"><div class="page-title"><h1 class="title">ц╡Еш░ИPromise</h1> <div data-v-8a445198><i class="iconfont reco-account" data-v-8a445198><span data-v-8a445198>щ╗ОхнР</span></i> <i class="iconfont reco-date" data-v-8a445198><span data-v-8a445198>2023/11/13</span></i> <!----> <i class="tags iconfont reco-tag" data-v-8a445198><span class="tag-item" data-v-8a445198>JavaScript</span></i></div></div> <div class="theme-reco-content content__default"><h1 id="promiseчЪДчРЖшзгхТМф╜┐чФи"><a href="#promiseчЪДчРЖшзгхТМф╜┐чФи" class="header-anchor">#</a> PromiseчЪДчРЖшзгхТМф╜┐чФи</h1> <h2 id="promiseцШпф╗Аф╣И"><a href="#promiseцШпф╗Аф╣И" class="header-anchor">#</a> PromiseцШпф╗Аф╣Ия╝Я</h2> <h3 id="чРЖшзг"><a href="#чРЖшзг" class="header-anchor">#</a> чРЖшзг</h3> <ol><li>цК╜ш▒бшбиш╛╛я╝Ъ
<ol><li>PromiseцШпф╕АщЧицЦ░чЪДцКАцЬпя╝ИES6шзДшМГя╝Й</li> <li>PromiseцШпJSф╕нш┐ЫшбМх╝Вцнеч╝ЦчиЛчЪДцЦ░шзгхЖ│цЦ╣цбИя╝ИцЧзцЦ╣цбИцШпхНХч║пф╜┐чФихЫЮш░ГхЗ╜цХ░я╝Й</li></ol></li> <li>хЕ╖ф╜Ушбиш╛╛я╝Ъ
<ol><li>ф╗Ошпнц│Хф╕КцЭешп┤я╝ЪPromiseцШпф╕Аф╕кцЮДщАахЗ╜цХ░</li> <li>ф╗ОхКЯшГ╜ф╕КцЭешп┤я╝ЪPromiseхп╣ш▒бчФицЭех░БшгЕф╕Аф╕кх╝ВцнецУНф╜Ьх╣╢хПпф╗ешО╖хПЦхЕ╢цИРхКЯ/хд▒ш┤ечЪДч╗УцЮЬхА╝</li></ol></li></ol> <h3 id="х╝Вцнеч╝ЦчиЛ"><a href="#х╝Вцнеч╝ЦчиЛ" class="header-anchor">#</a> х╝Вцнеч╝ЦчиЛ</h3> <ul><li>fs цЦЗф╗╢цУНф╜Ь</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'./index.html'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span> data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>цХ░цНох║УцУНф╜Ь</li> <li>AJAX</li></ul> <div class="language-js extra-class"><pre class="language-js"><code>$<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/server'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>хоЪцЧ╢хЩи</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="promiseчЪДчК╢цАБцФ╣хПШ"><a href="#promiseчЪДчК╢цАБцФ╣хПШ" class="header-anchor">#</a> PromiseчЪДчК╢цАБцФ╣хПШ</h3> <p><mark style="background:#FF5582A6;">Promiseхп╣ш▒бчЪДчК╢цАБ</mark>
хоЮф╛Лхп╣ш▒бф╕нчЪДф╕Аф╕кх▒ЮцАзя╝ЪуАРPromiseStateуАС</p> <ul><li>pending  цЬкхЖ│хоЪчЪД</li> <li>resolved / fullfilled цИРхКЯ</li> <li>rejected хд▒ш┤е</li></ul> <p><mark style="background:#FF5582A6;">Promiseхп╣ш▒бчЪДхА╝</mark>
хоЮф╛Лхп╣ш▒бф╕нчЪДхПжф╕Аф╕кх▒ЮцАзя╝ЪуАРPromiseResultуАС
ф┐ЭхнШчЭАхп╣ш▒буАРцИРхКЯ/хд▒ш┤еуАСчЪДч╗УцЮЬ</p> <ul><li>resolve</li> <li>reject</li></ul> <ol><li>pendingхПШф╕║resolved</li> <li>pendingхПШф╕║rejected</li> <li>шп┤цШОя╝Ъ
<ul><li>хПкцЬЙш┐Щ2чзНя╝Мф╕Фф╕Аф╕кPromiseхп╣ш▒бхПкшГ╜цФ╣хПШф╕Ацмб</li> <li>цЧашо║цИРхКЯш┐ШцШпхд▒ш┤ея╝МщГ╜ф╝ЪцЬЙф╕Аф╕кч╗УцЮЬцХ░цНо</li> <li>цИРхКЯчЪДч╗УцЮЬцХ░цНоф╕АшИмчз░ф╕║valueя╝Мхд▒ш┤ечЪДч╗УцЮЬцХ░цНоф╕АшИмчз░ф╕║reason</li></ul></li></ol> <h3 id="promiseчЪДхЯ║цЬмц╡БчиЛ"><a href="#promiseчЪДхЯ║цЬмц╡БчиЛ" class="header-anchor">#</a> PromiseчЪДхЯ║цЬмц╡БчиЛ</h3> <p><img src="https://gitee.com/yelishu/note/raw/master/noteImgs_2/202307071716527.png" alt="image.png"></p> <h3 id="promiseчЪДхЯ║цЬмф╜┐чФи"><a href="#promiseчЪДхЯ║цЬмф╜┐чФи" class="header-anchor">#</a> PromiseчЪДхЯ║цЬмф╜┐чФи</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// х░БшгЕф╕Аф╕кхЗ╜цХ░sendAJAXхПСщАБ GET AJAX шп╖ц▒В</span>
<span class="token comment">// хПВцХ░я╝ЪURL</span>
<span class="token comment">// ш┐ФхЫЮч╗УцЮЬя╝ЪPromiseхп╣ш▒б</span>

<span class="token keyword">function</span> <span class="token function">sendAJAX</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRequest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		xhr<span class="token punctuation">.</span><span class="token function">open</span><span class="token punctuation">(</span><span class="token string">&quot;GET&quot;</span><span class="token punctuation">,</span> url<span class="token punctuation">)</span><span class="token punctuation">;</span>
		xhr<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>readyState <span class="token operator">===</span> <span class="token number">4</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">if</span> <span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">&gt;=</span> <span class="token number">200</span> <span class="token operator">&amp;&amp;</span> xhr<span class="token punctuation">.</span>status <span class="token operator">&lt;</span> <span class="token number">300</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">resolve</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
					<span class="token function">reject</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">sendAJAX</span><span class="token punctuation">(</span><span class="token string">'https://v.api.aa1.cn/api/api-mima/mima.php?msg=10'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><mark style="background:#FF5582A6;">х╝Вх╕╕чй┐щАП</mark></p> <blockquote><p>хПпф╗ехЬицпПф╕кthen()чЪДчммф║Мф╕кхЫЮш░ГхЗ╜цХ░ф╕нш┐ЫшбМerrхдДчРЖя╝Мф╣ЯхПпф╗ехИйчФих╝Вх╕╕чй┐щАПчЙ╣цАзя╝МхИ░цЬАхРОчФи<code>catch</code>хО╗ч╗Яф╕АхдДчРЖя╝Мф╕дшАЕф╕Аш╡╖ф╜┐чФицЧ╢я╝МхЙНшАЕф╝ЪчФЯцХИя╝ИхЫаф╕║errх╖▓ч╗Пх░ЖхЕ╢хдДчРЖя╝Мх░▒ф╕Нф╝Ъх╛Аф╕Лчй┐щАПя╝ЙшАМш╡░ф╕НхИ░хРОщЭвчЪДcatch</p> <p>хЬицпПф╕к.then()ф╕нцИСф╗мхПпф╗ех░ЖцХ░цНохЖНцмбф╝ахЗ║ч╗Щф╕Лф╕Аф╕кthen()</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">mineReadFile</span><span class="token punctuation">(</span><span class="token string">'./resource/content.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> <span class="token string">&quot;2222222&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">err</span> <span class="token operator">=&gt;</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;ш┐ЩцШпcatchчЪД&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><p><mark style="background:#FF5582A6;">util.promisifyцЦ╣ц│Х</mark></p> <blockquote><p>хПпф╗ех░ЖхЗ╜цХ░чЫ┤цОехПШцИРPromiseчЪДх░БшгЕцЦ╣х╝Пя╝Мф╕НчФихЖНхО╗цЙЛхКих░БшгЕ</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
util.promisify цЦ╣ц│Х
*/</span>

<span class="token comment">// х╝ХхЕеutilцибхЭЧ</span>
<span class="token keyword">const</span> util <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'util'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> mineReadFile <span class="token operator">=</span> util<span class="token punctuation">.</span><span class="token function">promisify</span><span class="token punctuation">(</span>fs<span class="token punctuation">.</span>readFile<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">mineReadFile</span><span class="token punctuation">(</span><span class="token string">'./resource/content.txt'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="ф╕║ф╗Аф╣ИшжБчФиpromise"><a href="#ф╕║ф╗Аф╣ИшжБчФиpromise" class="header-anchor">#</a> ф╕║ф╗Аф╣ИшжБчФиPromiseя╝Я</h2> <h3 id="цМЗхоЪхЫЮш░ГхЗ╜цХ░чЪДцЦ╣х╝ПцЫ┤хКачБ╡ц┤╗"><a href="#цМЗхоЪхЫЮш░ГхЗ╜цХ░чЪДцЦ╣х╝ПцЫ┤хКачБ╡ц┤╗" class="header-anchor">#</a> цМЗхоЪхЫЮш░ГхЗ╜цХ░чЪДцЦ╣х╝ПцЫ┤хКачБ╡ц┤╗</h3> <ol><li>цЧзчЪДя╝Ъх┐Ещб╗хЬихРпхКих╝Вцнеф╗╗хКбхЙНцМЗхоЪ</li> <li>Promiseя╝ЪхРпхКих╝Вцнеф╗╗хКб =&gt; ш┐ФхЫЮPromiseхп╣ш▒б =&gt; ч╗ЩPromiseхп╣ш▒бч╗СхоЪхЫЮш░ГхЗ╜цХ░я╝ИчФЪшЗ│хПпф╗ехЬих╝Вцнеф╗╗хКбч╗УцЭЯхРОцМЗхоЪ/хдЪф╕кя╝Й</li></ol> <h3 id="цФпцМБщУ╛х╝Пш░ГчФи-хПпф╗ешзгхЖ│хЫЮш░ГхЬ░чЛ▒щЧощвШ"><a href="#цФпцМБщУ╛х╝Пш░ГчФи-хПпф╗ешзгхЖ│хЫЮш░ГхЬ░чЛ▒щЧощвШ" class="header-anchor">#</a> цФпцМБщУ╛х╝Пш░ГчФия╝МхПпф╗ешзгхЖ│хЫЮш░ГхЬ░чЛ▒щЧощвШ</h3> <ol><li>ф╗Аф╣ИцШпхЫЮш░ГхЬ░чЛ▒я╝Я
<ul><li>хЫЮш░ГхЗ╜цХ░х╡МхеЧш░ГчФия╝МхдЦщГихЫЮш░ГхЗ╜цХ░х╝ВцнецЙзшбМчЪДч╗УцЮЬцШпх╡МхеЧчЪДхЫЮш░ГцЙзшбМчЪДцЭбф╗╢
<img src="https://gitee.com/yelishu/note/raw/master/noteImgs_2/202307071732955.png" alt="image.png"></li></ul></li> <li>хЫЮш░ГхЬ░чЛ▒чЪДчЙ╣чВ╣я╝Я
<ul><li>ф╕Нф╛┐ф║ОщШЕшп╗</li> <li>ф╕Нф╛┐ф║Ох╝Вх╕╕хдДчРЖ</li></ul></li> <li>шзгхЖ│цЦ╣цбИ
<ul><li>Promiseя╝ЪцФпцМБщУ╛х╝Пш░ГчФия╝МшГ╜хдЯшзгхЖ│хЫЮш░ГхЬ░чЛ▒щЧощвШ</li> <li>Async/Awaitя╝Ъшпнц│Хч│Ця╝МщЪРшЧПPromiseя╝Мф╜┐х╝ВцнещА╗ш╛СчЬЛш╡╖цЭехГПхРМцнещА╗ш╛Ся╝МхПпф╗ецЫ┤хе╜хЬ░шзгхЖ│хЫЮш░ГхЬ░чЛ▒</li> <li>Generatorя╝ЪщАЪш┐ЗyieldхПпф╗ецЪВхБЬхЗ╜цХ░чЪДцЙзшбМя╝Мф╕║х╝Вцнеч╝ЦчиЛщАЪш┐Зф║ЖхПпшГ╜</li></ul></li></ol> <h2 id="хжВф╜Хф╜┐чФиpromise"><a href="#хжВф╜Хф╜┐чФиpromise" class="header-anchor">#</a> хжВф╜Хф╜┐чФиPromiseя╝Я</h2> <h3 id="api"><a href="#api" class="header-anchor">#</a> API</h3> <ol><li><p>PromiseцЮДщАахЗ╜цХ░я╝ЪPromise (executor) {}</p> <ul><li>executor хЗ╜цХ░я╝ЪцЙзшбМхЩи (resolve, reject) =&gt; {}</li> <li>resolve хЗ╜цХ░я╝ЪхЖЕщГихоЪф╣ЙцИРхКЯцЧ╢цИСф╗мш░ГчФичЪДхЗ╜цХ░ value =&gt; {}</li> <li>reject хЗ╜цХ░я╝ЪхЖЕщГихоЪф╣Йхд▒ш┤ецЧ╢цИСф╗мш░ГчФичЪДхЗ╜цХ░ reason =&gt; {}</li> <li>шп┤цШОя╝Ъexecutor ф╝ЪхЬи Promise хЖЕщГичлЛхН│хРМцнеш░ГчФия╝Мх╝ВцнецУНф╜ЬхЬицЙзшбМхЩиф╕нцЙзшбМ</li></ul></li> <li><p>Promise.prototype.then цЦ╣ц│Хя╝Ъ(onResolved, onRejected) =&gt; {}</p> <ul><li>onResolved хЗ╜цХ░я╝ЪцИРхКЯчЪДхЫЮш░ГхЗ╜цХ░ (value) =&gt; {}</li> <li>onRejected хЗ╜цХ░я╝Ъхд▒ш┤ечЪДхЫЮш░ГхЗ╜цХ░ (reason) =&gt; {}</li> <li>шп┤цШОя╝ЪцМЗхоЪчФиф║Ох╛ЧхИ░цИРхКЯvalueчЪДцИРхКЯхЫЮш░ГхТМчФиф║Ох╛ЧхИ░хд▒ш┤еreasonчЪДхд▒ш┤ехЫЮш░Гя╝Мш┐ФхЫЮф╕Аф╕кцЦ░чЪДPromiseхп╣ш▒б</li></ul></li> <li><p>Promise.prototype.catch цЦ╣ц│Хя╝Ъ(onRejected) =&gt; {}</p> <ul><li>onRejected хЗ╜цХ░я╝Ъхд▒ш┤ечЪДхЫЮш░ГхЗ╜цХ░ (reason) =&gt; {}</li> <li>шп┤цШОя╝Ъthen() чЪДшпнц│Хч│Ця╝МчЫ╕хп╣ф║Оя╝Ъthen(undefined, OnRejected)</li> <li>х╝Вх╕╕чй┐щАПф╜┐чФия╝Ъх╜Уш┐РшбМхИ░цЬАхРОя╝Мц▓бшвлхдДчРЖчЪДцЙАцЬЙх╝Вх╕╕щФЩшппщГ╜ф╝Ъш┐ЫхЕеш┐Щф╕кцЦ╣ц│ХчЪДхЫЮш░ГхЗ╜цХ░ф╕н</li></ul></li> <li><p>Promise.resolve цЦ╣ц│Хя╝Ъ(value) =&gt; {}</p> <ul><li>valueя╝ЪцИРхКЯчЪДцХ░цНоцИЦ promise хп╣ш▒б</li> <li>шп┤цШОш┐ФхЫЮф╕Аф╕кцИРхКЯ/хд▒ш┤ечЪД promise хп╣ш▒б</li></ul></li> <li><p>Promise.reject цЦ╣ц│Хя╝Ъ(reason) =&gt; {}</p> <ul><li>reasonя╝Ъхд▒ш┤ечЪДхОЯхЫа</li> <li>шп┤цШОя╝Ъш┐ФхЫЮф╕Аф╕кхд▒ш┤ечЪД promise хп╣ш▒б</li></ul></li> <li><p>Promise.all цЦ╣ц│Хя╝Ъ(promises) =&gt; {}</p> <ul><li>promisesя╝ЪхМЕхРл n ф╕к promise чЪДцХ░ч╗Д</li> <li>шп┤цШОя╝Ъш┐ФхЫЮф╕Аф╕кцЦ░чЪД promiseя╝МхПкцЬЙцЙАцЬЙчЪД promise щГ╜цИРхКЯцЙНцИРхКЯя╝МхПкшжБцЬЙф╕Аф╕кхд▒ш┤еф║Жх░▒чЫ┤цОехд▒ш┤е</li></ul></li> <li><p>Promise.race цЦ╣ц│Хя╝Ъ(promises) =&gt; {}</p> <ul><li>promisesя╝ЪхМЕхРл n ф╕к promise чЪДцХ░ч╗Д</li> <li>шп┤цШОя╝Ъш┐ФхЫЮф╕Аф╕кцЦ░чЪДpromiseя╝Мчммф╕Аф╕кхоМцИРчЪД promise чЪДч╗УцЮЬчК╢цАБх░▒цШпцЬАч╗ИчЪДч╗УцЮЬчК╢цАБ</li> <li>хжВp1х╗╢цЧ╢я╝Мх╝АхРпф║Жх╝Вцнея╝МхЖЕщГицнгх╕╕цШпхРМцнеш┐ЫшбМчЪДя╝МцЙАф╗е<code>p2 &gt; p3 &gt; p1</code>я╝Мч╗УцЮЬх░▒цШп<code>p2</code></li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> p2 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'Success'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> p3 <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'On Yeah'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> result <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">race</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span> p2<span class="token punctuation">,</span> p3<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="8"><li>Promise.prototype.finally()
<ul><li><code>finally()</code>цЦ╣ц│ХчФиф║ОцМЗхоЪф╕Нчоб Promise хп╣ш▒бцЬАхРОчК╢цАБхжВф╜Хя╝МщГ╜ф╝ЪцЙзшбМчЪДцУНф╜ЬуАВшпецЦ╣ц│ХцШп <code>ES2018</code> х╝ХхЕецаЗхЗЖчЪДуАВ</li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code>promise
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">result</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>┬╖┬╖┬╖<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token parameter">error</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>┬╖┬╖┬╖<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>┬╖┬╖┬╖<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ф╕КщЭвф╗гчаБф╕ня╝Мф╕Нчоб<code>promise</code>цЬАхРОчЪДчК╢цАБя╝МхЬицЙзшбМхоМ<code>then</code>цИЦ<code>catch</code>цМЗхоЪчЪДхЫЮш░ГхЗ╜цХ░ф╗ехРОя╝МщГ╜ф╝ЪцЙзшбМ<code>finally</code>цЦ╣ц│ХцМЗхоЪчЪДхЫЮш░ГхЗ╜цХ░уАВ</p> <ul><li><p><code>finally</code>цЦ╣ц│ХчЪДхЫЮш░ГхЗ╜цХ░ф╕НцОехПЧф╗╗ф╜ХхПВцХ░я╝М</p></li> <li><p>ш┐ЩцДПхС│чЭАц▓бцЬЙхКЮц│ХчЯещБУя╝МхЙНщЭвчЪД Promise чК╢цАБхИ░х║ХцШп<code>fulfilled</code>ш┐ШцШп<code>rejected</code>уАВ</p></li> <li><p>ш┐ЩшбицШОя╝М<code>finally</code>цЦ╣ц│ХщЗМщЭвчЪДцУНф╜Ья╝Мх║ФшпецШпф╕ОчК╢цАБцЧахЕ│чЪДя╝Мф╕Нф╛Эш╡Цф║О Promise чЪДцЙзшбМч╗УцЮЬ</p></li> <li><p><code>finally</code>цЬмш┤иф╕КцШп<code>then</code>цЦ╣ц│ХчЪДчЙ╣ф╛Л</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>promise
<span class="token punctuation">.</span><span class="token function">finally</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// чнЙхРМф║О</span>
promise
<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
	<span class="token parameter">result</span> <span class="token operator">=&gt;</span>  result <span class="token punctuation">,</span>
	<span class="token parameter">error</span> <span class="token operator">=&gt;</span>  <span class="token keyword">throw</span> error
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ф╕КщЭвф╗гчаБф╕ня╝МхжВцЮЬф╕Нф╜┐чФи<code>finally</code>цЦ╣ц│Хя╝МхРМца╖чЪДшпнхПещЬАшжБф╕║цИРхКЯхТМхд▒ш┤еф╕дчзНцГЕхЖ╡хРДхЖЩф╕АцмбуАВцЬЙф║Ж<code>finally</code>цЦ╣ц│Хя╝МхИЩхПкщЬАшжБхЖЩф╕АцмбуАВ</p> <ol start="9"><li>Promise.allSettled()
<ul><li><code>Promise.allSettled()</code>цЦ╣ц│ХцОехПЧф╕Ач╗Д Promise хоЮф╛Лф╜Ьф╕║хПВцХ░я╝МхМЕшгЕцИРф╕Аф╕кцЦ░чЪД Promise хоЮф╛ЛуАВ</li> <li><strong>хПкцЬЙчнЙхИ░цЙАцЬЙш┐Щф║ЫхПВцХ░хоЮф╛ЛщГ╜ш┐ФхЫЮч╗УцЮЬ</strong>я╝Мф╕НчобцШп<code>fulfilled</code>ш┐ШцШп<code>rejected</code>я╝МхМЕшгЕхоЮф╛ЛцЙНф╝Ъч╗УцЭЯуАВ</li> <li>шпецЦ╣ц│ХчФ▒ <a href="https://gitee.com/link?target=https%3A%2F%2Fgithub.com%2Ftc39%2Fproposal-promise-allSettled" target="_blank" rel="noopener noreferrer">ES2020<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> х╝ХхЕеуАВ</li></ul></li></ol> <p><mark style="background:#FF5582A6;">ф╕╛ф╕кчоАхНХчЪДЁЯМ░</mark></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> promises <span class="token operator">=</span> <span class="token punctuation">[</span>
	<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://gitee.com/hongjilin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'https://github.com/Hongjilin'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token function">fetch</span><span class="token punctuation">(</span><span class="token string">'./hong.json'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
loading <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> <span class="token comment">//шп╖ц▒ВхЙНх░Ж loading цФ╣ф╕║true ; щб╡щЭвхЗ║чО░ц╗ЪхКихКаш╜╜хЫ╛цаЗшТЩх▒В</span>
<span class="token keyword">await</span> Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span>promises<span class="token punctuation">)</span><span class="token punctuation">;</span>
loading <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>ф╕КщЭвф╗гчаБхп╣цЬНхКбхЩихПСхЗ║ф╕Йф╕кшп╖ц▒Вя╝МчнЙхИ░ф╕Йф╕кшп╖ц▒ВщГ╜ч╗УцЭЯя╝Мф╕Нчобшп╖ц▒ВцИРхКЯш┐ШцШпхд▒ш┤ея╝МхКаш╜╜чЪДц╗ЪхКихЫ╛цаЗх░▒ф╝Ъц╢Ихд▒уАВ</p></blockquote> <ul><li>шпецЦ╣ц│Хш┐ФхЫЮчЪДцЦ░чЪД Promise хоЮф╛Ля╝Мф╕АцЧжч╗УцЭЯя╝МчК╢цАБцА╗цШп<code>fulfilled</code>я╝Мф╕Нф╝ЪхПШцИР<code>rejected</code></li></ul> <blockquote><p>шпецЦ╣ц│Хш┐ФхЫЮчЪДцЦ░чЪД Promise хоЮф╛Ля╝Мф╕АцЧжч╗УцЭЯя╝МчК╢цАБцА╗цШп<code>fulfilled</code>я╝Мф╕Нф╝ЪхПШцИР<code>rejected</code>уАВчК╢цАБхПШцИР<code>fulfilled</code>хРОя╝МPromise чЪДчЫСхРмхЗ╜цХ░цОецФ╢хИ░чЪДхПВцХ░цШпф╕Аф╕кцХ░ч╗Дя╝МцпПф╕кцИРхСШхп╣х║Фф╕Аф╕кф╝ахЕе<code>Promise.allSettled()</code>чЪД Promise хоЮф╛ЛуАВ</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> resolved <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'ш┐ФхЫЮцИРхКЯчК╢цАБчЪДpromise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> rejected <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'ш┐ФхЫЮхд▒ш┤ечК╢цАБчЪДpromise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> allSettledPromise <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">allSettled</span><span class="token punctuation">(</span><span class="token punctuation">[</span>resolved<span class="token punctuation">,</span> rejected<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Promise.allSettled х╛ЧхИ░чЪДцЦ░хоЮф╛ЛчК╢цАБхПкф╝ЪцШп `fulfilled`</span>
allSettledPromise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">results</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>results<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//ц│ицДП,ш┐ЩцШп `fulfilled` чЪДхЫЮш░ГхЗ╜цХ░,хПкцЬЙхЕ╢чК╢цАБф╕║цИРхКЯцЙНшГ╜ш┐ЫхИ░ш┐ЩщЗМ</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/*
[
  { &quot;status&quot;: &quot;fulfilled&quot;, &quot;value&quot;: &quot;ш┐ФхЫЮцИРхКЯчК╢цАБчЪДpromise&quot; },
  { &quot;status&quot;: &quot;rejected&quot;, &quot;reason&quot;: &quot;ш┐ФхЫЮхд▒ш┤ечК╢цАБчЪДpromise&quot; }
]
*/</span>
</code></pre></div><ul><li><code>Promise.allSettled()</code>чЪДш┐ФхЫЮхА╝<code>allSettledPromise</code>я╝МчК╢цАБхПкхПпшГ╜хПШцИР<code>fulfilled</code>(ц│ицДП,цШп <strong>allSettledPromise</strong> чЪДчК╢цАБ,шАМф╕НцШпхЖЕщГичЪДpromiseхоЮф╛Л)</li> <li>хоГчЪДчЫСхРмхЗ╜цХ░цОецФ╢хИ░чЪДхПВцХ░цШпцХ░ч╗Д<code>results</code>уАВшпецХ░ч╗ДчЪДцпПф╕кцИРхСШщГ╜цШпф╕Аф╕кхп╣ш▒бя╝Мхп╣х║ФчЪДцШпф╝ахЕе<code>Promise.allSettled()</code>чЪД Promise хоЮф╛ЛуАВ</li> <li>цпПф╕кхп╣ш▒бщГ╜цЬЙ<code>status</code>х▒ЮцАзя╝Мшпех▒ЮцАзчЪДхА╝хПкхПпшГ╜цШпхнЧчмжф╕▓<code>fulfilled</code>цИЦхнЧчмжф╕▓<code>rejected</code>уАВ</li> <li><code>fulfilled</code>цЧ╢я╝Мхп╣ш▒бцЬЙ<code>value</code>х▒ЮцАзя╝М<code>rejected</code>цЧ╢цЬЙ<code>reason</code>х▒ЮцАзя╝Мхп╣х║Фф╕дчзНчК╢цАБчЪДш┐ФхЫЮхА╝уАВ</li></ul> <h3 id="promiseчЪДхЗаф╕кхЕ│щФощЧощвШ"><a href="#promiseчЪДхЗаф╕кхЕ│щФощЧощвШ" class="header-anchor">#</a> PromiseчЪДхЗаф╕кхЕ│щФощЧощвШ</h3> <ol><li><p>хжВф╜ХцФ╣хПШPromiseчЪДчК╢цАБя╝Я</p> <ul><li>resolve(value)я╝ЪхжВцЮЬх╜УхЙНцШпpendingх░▒ф╝ЪхПШцИРresolved</li> <li>reject(reason)я╝ЪхжВцЮЬх╜УхЙНцШпpendingх░▒ф╝ЪхПШцИРrejected</li> <li>цКЫхЗ║х╝Вх╕╕я╝ЪхжВцЮЬх╜УхЙНцШпpendingх░▒ф╝ЪхПШцИРrejected</li></ul></li> <li><p>ф╕Аф╕кPromiseцМЗхоЪхдЪф╕кцИРхКЯ/хд▒ш┤ехЫЮш░ГхЗ╜цХ░я╝МщГ╜ф╝Ъш░ГчФихРЧя╝Я</p> <ul><li>х╜УPromiseцФ╣хПШф╕║хп╣х║ФчК╢цАБцЧ╢щГ╜ф╝Ъш░ГчФи</li></ul></li> <li><p>цФ╣хПШPromiseчК╢цАБхТМцМЗхоЪхЫЮш░ГхЗ╜цХ░ш░БхЕИш░БхРОя╝Я</p> <ul><li>щГ╜цЬЙхПпшГ╜я╝Мцнгх╕╕цГЕхЖ╡ф╕ЛцШпхЕИцМЗхоЪхЫЮш░ГхЖНцФ╣хПШчК╢цАБя╝И<code>х╝Вцне</code>я╝Йя╝Ъ
хЕИцМЗхоЪхЫЮш░Г --&gt; хЖНцФ╣хПШчК╢цАБ --&gt; цФ╣хПШчК╢цАБхРОцЙНш┐ЫхЕех╝ВцнещШЯхИЧцЙзшбМхЫЮш░ГхЗ╜цХ░я╝М
ф╜Жф╣ЯхПпф╗ехЕИцФ╣хПШчК╢цАБхЖНцМЗхоЪхЫЮш░Гя╝И<code>хРМцне</code>я╝Йя╝Ъ
цФ╣хПШчК╢цАБ --&gt; цМЗхоЪхЫЮш░Г <code>х╣╢щймф╕КцЙзшбМ</code>хЫЮш░Г</li> <li>хжВф╜ХхЕИцФ╣хПШчК╢цАБхЖНцМЗхоЪхЫЮш░Гя╝Я
<ul><li>хЬицЙзшбМхЩиф╕нчЫ┤цОеш░ГчФиresolve() / reject()я╝МхН│ф╕Нф╜┐чФихоЪцЧ╢хЩичнЙцЦ╣ц│Х,цЙзшбМхЩихЖЕчЫ┤цОехРМцнецУНф╜Ь</li> <li>х╗╢ш┐ЯцЫ┤щХ┐цЧ╢щЧ┤цЙНш░ГчФиthen()я╝МхН│хЬи<code>.then()</code>ш┐Щф╕кцЦ╣ц│ХхдЦхЖНхМЕф╕Ах▒Вф╛ЛхжВх╗╢цЧ╢хЩиш┐ЩчзНцЦ╣ц│Х</li></ul></li> <li>ф╗Аф╣ИцЧ╢хАЩцЙНшГ╜х╛ЧхИ░цХ░цНоя╝Я
<ul><li>хжВцЮЬхЕИцМЗхоЪчЪДхЫЮш░Гя╝МщВгх╜УчК╢цАБхПСчФЯцФ╣хПШцЧ╢я╝МхЫЮш░ГхЗ╜цХ░х░▒ф╝Ъш░ГчФия╝Мх╛ЧхИ░цХ░цНо</li> <li>хжВцЮЬхЕИцФ╣хПШчЪДчК╢цАБя╝МщВгцМЗхоЪхЫЮш░ГцЧ╢я╝МхЫЮш░ГхЗ╜цХ░х░▒ф╝Ъш░ГчФия╝Мх╛ЧхИ░цХ░цНо</li></ul></li></ul></li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	<span class="token comment">//х╝ВцнехЖЩц│Х,ш┐Щца╖хЖЩф╝ЪхЕИцМЗхоЪхЫЮш░Г,хЖНцФ╣хПШчК╢цАБ</span>
	<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
		<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
	<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//ш┐ЩцШпхРМцнехЖЩц│Х,ш┐Щца╖хЖЩф╝ЪхЕИцФ╣хПШчК╢цАБ,хЖНцМЗхоЪхЫЮш░Г</span>
	<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'OK'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><ol start="4"><li><p>promise.then() ш┐ФхЫЮчЪДцЦ░ promise чЪДч╗УцЮЬчК╢цАБчФ▒ф╗Аф╣ИхЖ│хоЪя╝Я</p> <ul><li>чоАхНХшбиш╛╛х╝Пя╝ЪчФ▒ then() цМЗхоЪчЪДхЫЮш░ГхЗ╜цХ░цЙзшбМчЪДч╗УцЮЬхЖ│хоЪ</li> <li>шпжч╗Жшбиш╛╛х╝Пя╝Ъ
<ul><li>хжВцЮЬцКЫхЗ║х╝Вх╕╕я╝МцЦ░ promise хПШф╕║ rejectedя╝Мreason ф╕║цКЫхЗ║чЪДх╝Вх╕╕</li> <li>хжВцЮЬш┐ФхЫЮчЪДцШпщЭЮ promise чЪДф╗╗цДПхА╝я╝МцЦ░ promise хПШф╕║ resolvedя╝Мvalue ф╕║ш┐ФхЫЮчЪДхА╝</li> <li>хжВцЮЬш┐ФхЫЮчЪДцШпхПжф╕Аф╕кцЦ░ promiseя╝Мцнд promise чЪДч╗УцЮЬх░▒ф╝ЪхПШцИРцЦ░ promise чЪДч╗УцЮЬ</li></ul></li></ul></li> <li><p>promise хжВф╜Хф╕▓шБФхдЪф╕кцУНф╜Ьф╗╗хКбя╝Я</p> <ul><li>promise чЪД then() ш┐ФхЫЮф╕Аф╕кцЦ░чЪД promiseя╝МхПпф╗ех╝АцИР then() чЪДщУ╛х╝Пш░ГчФи</li> <li>щАЪш┐З then чЪДщУ╛х╝Пш░ГчФиф╕▓шБФхдЪф╕кхРМцне/х╝Вцнеф╗╗хКб</li></ul></li> <li><p>promise х╝Вх╕╕чй┐щАПя╝Я</p> <ul><li>х╜Уф╜┐чФи promise чЪД then щУ╛х╝Пш░ГчФицЧ╢я╝МхПпф╗ехЬицЬАхРОцМЗхоЪхд▒ш┤ечЪДхЫЮш░Г</li> <li>хЙНщЭвф╗╗ф╜ХцУНф╜ЬхЗ║чО░ф║Жх╝Вх╕╕я╝МщГ╜ф╝Ъф╝ахИ░цЬАхРОхд▒ш┤ечЪДхЫЮш░Гф╕нхдДчРЖ</li></ul></li> <li><p>ф╕нцЦн promise щУ╛я╝Я</p> <ul><li>х╜Уф╜┐чФи promise чЪД then щУ╛х╝Пш░ГчФицЧ╢я╝МхЬиф╕нщЧ┤ф╕нцЦня╝Мф╕НхЖНш░ГчФихРОщЭвчЪДхЫЮш░ГхЗ╜цХ░</li> <li>хКЮц│Хя╝ЪхЬихЫЮш░ГхЗ╜цХ░ф╕нш┐ФхЫЮф╕Аф╕к pending чК╢цАБчЪД promise хп╣ш▒б</li></ul></li></ol> <h3 id="promiseчЪДхоЮщЩЕх║ФчФи"><a href="#promiseчЪДхоЮщЩЕх║ФчФи" class="header-anchor">#</a> PromiseчЪДхоЮщЩЕх║ФчФи</h3> <h4 id="хКаш╜╜хЫ╛чЙЗ"><a href="#хКаш╜╜хЫ╛чЙЗ" class="header-anchor">#</a> хКаш╜╜хЫ╛чЙЗ</h4> <p>цИСф╗мхПпф╗ех░ЖхЫ╛чЙЗчЪДхКаш╜╜хЖЩцИРф╕Аф╕к<code>Promise</code>я╝Мф╕АцЧжхКаш╜╜хоМцИРя╝М<code>Promise</code>чЪДчК╢цАБх░▒хПСчФЯхПШхМЦуАВ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">preloadImage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">path</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> image <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Image</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   image<span class="token punctuation">.</span>onload  <span class="token operator">=</span> resolve<span class="token punctuation">;</span>
   image<span class="token punctuation">.</span>onerror <span class="token operator">=</span> reject<span class="token punctuation">;</span>
   image<span class="token punctuation">.</span>src <span class="token operator">=</span> path<span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="generatorхЗ╜цХ░ф╕ОpromiseчЪДч╗УхРИ"><a href="#generatorхЗ╜цХ░ф╕ОpromiseчЪДч╗УхРИ" class="header-anchor">#</a> GeneratorхЗ╜цХ░ф╕ОPromiseчЪДч╗УхРИ</h4> <p>ф╜┐чФиGeneratorхЗ╜цХ░чобчРЖц╡БчиЛя╝МщБЗхИ░х╝ВцнецУНф╜ЬчЪДцЧ╢хАЩя╝МщАЪх╕╕ш┐ФхЫЮф╕Аф╕к<code>Promise</code>хп╣ш▒буАВ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getFoo</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
   <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">g</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">try</span> <span class="token punctuation">{</span>
   <span class="token keyword">const</span> foo <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">getFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">run</span> <span class="token punctuation">(</span><span class="token parameter">generator</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
 <span class="token keyword">const</span> it <span class="token operator">=</span> <span class="token function">generator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token keyword">function</span> <span class="token function">go</span><span class="token punctuation">(</span><span class="token parameter">result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">if</span> <span class="token punctuation">(</span>result<span class="token punctuation">.</span>done<span class="token punctuation">)</span> <span class="token keyword">return</span> result<span class="token punctuation">.</span>value<span class="token punctuation">;</span>
   <span class="token keyword">return</span> result<span class="token punctuation">.</span>value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">go</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token keyword">return</span> <span class="token function">go</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">throw</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
   <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
 <span class="token function">go</span><span class="token punctuation">(</span>it<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">run</span><span class="token punctuation">(</span>g<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ф╕КщЭвф╗гчаБчЪД Generator хЗ╜цХ░<code>g</code>ф╣Лф╕ня╝МцЬЙф╕Аф╕кх╝ВцнецУНф╜Ь<code>getFoo</code>я╝МхоГш┐ФхЫЮчЪДх░▒цШпф╕Аф╕к<code>Promise</code>хп╣ш▒буАВхЗ╜цХ░<code>run</code>чФицЭехдДчРЖш┐Щф╕к<code>Promise</code>хп╣ш▒бя╝Мх╣╢ш░ГчФиф╕Лф╕Аф╕к<code>next</code>цЦ╣ц│Х</p> <h3 id="хоПф╗╗хКбф╕Ох╛оф╗╗хКб"><a href="#хоПф╗╗хКбф╕Ох╛оф╗╗хКб" class="header-anchor">#</a> хоПф╗╗хКбф╕Ох╛оф╗╗хКб</h3> <p><mark style="background:#FF5582A6;">Promise цЦ░х╗║хРОх░▒ф╝ЪчлЛхН│цЙзшбМ</mark></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> promise <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Promise'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'resolved.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hi!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Promise</span>
<span class="token comment">// Hi!</span>
<span class="token comment">// resolved //хПпф╗ехПСчО░,цШОцШОthenцШпхЬи Hi хЙНщЭв,хН┤цЬАхРОцЙУхН░</span>
</code></pre></div><p>ф╕КщЭвф╗гчаБф╕ня╝МPromise цЦ░х╗║хРОчлЛхН│цЙзшбМя╝МцЙАф╗ещжЦхЕИш╛УхЗ║чЪДцШп<code>Promise</code>уАВчД╢хРОя╝М<code>then</code>цЦ╣ц│ХцМЗхоЪчЪДхЫЮш░ГхЗ╜цХ░я╝Мх░ЖхЬих╜УхЙНшДЪцЬмцЙАцЬЙхРМцнеф╗╗хКбцЙзшбМхоМцЙНф╝ЪцЙзшбМя╝МцЙАф╗е<code>resolved</code>цЬАхРОш╛УхЗ║уАВ</p> <p>хоЮщЩЕф╕К,ш┐Щф╕кш┐РшбМч╗УцЮЬчЫ╕хЕ│чЯешпЖчВ╣цШпхоПф╗╗хКбф╕Ох╛оф╗╗хКбя╝МхНХчЛмцв│чРЖхЬиф╕ЛцЦ╣.ш┐ЩщЗМхПпф╗ехЕИхИЭцнечРЖшзгф╕║:</p> <ul><li>JSцШпхНХч║┐чиЛчЪД,шЗ│ф╕Кх╛Аф╕Лш┐РшбМ,хЬихг░цШО <strong>Promise</strong> цЧ╢хоЮщЩЕф╕Кх╖▓ч╗ПцЙзшбМхИ░ф║ЖхЖЕщГицЦ╣ц│Х</li> <li>ф╕║ф╜Х resolve() ш┐РшбМхРОц▓бцЬЙчлЛхН│цЙУхН░?
<ul><li>JSф╕нчФицЭехнШхВих╛ЕцЙзшбМхЫЮш░ГхЗ╜цХ░чЪДщШЯхИЧхМЕхРл2ф╕кф╕НхРМчЙ╣хоЪчЪДхИЧщШЯ
<ul><li><code>хоПщШЯхИЧ</code>:чФицЭеф┐ЭхнШх╛ЕцЙзшбМчЪДхоПф╗╗хКб(хЫЮш░Г),цпФхжВ:<code>хоЪцЧ╢хЩи</code>хЫЮш░Г/ajaxхЫЮш░Г/domф║Лф╗╢хЫЮш░Г</li> <li><code>х╛ощШЯхИЧ</code>:чФицЭеф┐ЭхнШх╛ЕцЙзшбМчЪДх╛оф╗╗хКб(хЫЮш░Г),цпФхжВ:<code>Promise</code>чЪДхЫЮш░Г/muntationхЫЮш░Г</li></ul></li> <li>JSцЙзшбМцЧ╢ф╝ЪхМ║хИлш┐Щ2ф╕кщШЯхИЧ:
<ul><li>JSцЙзшбМх╝ХцУОщжЦхЕИх┐Ещб╗цЙзшбМцЙАцЬЙчЪД<code>хИЭхзЛхМЦхРМцнеф╗╗хКб</code>ф╗гчаБ</li> <li>цпПцмбхЗЖхдЗхПЦхЗ║чммф╕Аф╕к<code>хоПф╗╗хКбцЙзшбМхЙН</code>,щГ╜шжБх░ЖцЙАцЬЙчЪД<code>х╛оф╗╗хКб</code>ф╕Аф╕кф╕Аф╕кхПЦхЗ║цЭецЙзшбМ</li></ul></li></ul></li></ul> <h1 id="шЗкхоЪф╣Йpromise"><a href="#шЗкхоЪф╣Йpromise" class="header-anchor">#</a> шЗкхоЪф╣ЙPromise</h1> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Promise</span> <span class="token punctuation">{</span>
	<span class="token comment">// цЮДщАацЦ╣ц│Х</span>
	<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">executor</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// ц╖╗хКах▒ЮцАз</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>promiseState <span class="token operator">=</span> <span class="token string">'pending'</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>promiseResult <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>callbacks <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
		
		<span class="token comment">// ф┐ЭхнШхоЮф╛Лхп╣ш▒бчЪДthisхА╝</span>
		<span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		
		<span class="token comment">// resolve хЗ╜цХ░</span>
		<span class="token keyword">function</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// хИдцЦн</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>promiseState <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			
			<span class="token comment">// 1. ф┐оцФ╣хп╣ш▒бчК╢цАБя╝ИpromiseStateя╝Й</span>
			_this<span class="token punctuation">.</span>promiseState <span class="token operator">=</span> <span class="token string">'fulfilled'</span><span class="token punctuation">;</span> <span class="token comment">// resolved</span>
			
			<span class="token comment">// 2. шо╛ч╜охп╣ш▒бч╗УцЮЬхА╝я╝ИpromiseResultя╝Й</span>
			_this<span class="token punctuation">.</span>promiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
			
			<span class="token comment">// ш░ГчФицИРхКЯчЪДхЫЮш░ГхЗ╜цХ░</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				_this<span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					callback<span class="token punctuation">.</span><span class="token function">onResolved</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">// rejectхЗ╜цХ░</span>
		<span class="token keyword">function</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token comment">// хИдцЦн</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>_this<span class="token punctuation">.</span>promiseState <span class="token operator">!==</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>
			
			<span class="token comment">// 1. ф┐оцФ╣хп╣ш▒бчК╢цАБя╝ИpromiseStateя╝Й</span>
			_this<span class="token punctuation">.</span>promiseState <span class="token operator">=</span> <span class="token string">'rejected'</span><span class="token punctuation">;</span> <span class="token comment">// rejected</span>
			
			<span class="token comment">// 2. шо╛ч╜охп╣ш▒бч╗УцЮЬхА╝я╝ИpromiseResultя╝Й</span>
			_this<span class="token punctuation">.</span>promiseResult <span class="token operator">=</span> data<span class="token punctuation">;</span>
			
			<span class="token comment">// ш░ГчФихд▒ш┤ечЪДхЫЮш░ГхЗ╜цХ░</span>
			<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				_this<span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token parameter">callback</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					callback<span class="token punctuation">.</span><span class="token function">onRejected</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
			<span class="token keyword">try</span> <span class="token punctuation">{</span>
				<span class="token comment">// хРМцнеш░ГчФи уАРцЙзшбМхЩихЗ╜цХ░уАС</span>
				<span class="token function">executor</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// ф┐оцФ╣ promise хп╣ш▒бчК╢цАБф╕║уАРхд▒ш┤еуАС</span>
				<span class="token function">reject</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// thenцЦ╣ц│Хх░БшгЕ</span>
	<span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">onResolved<span class="token punctuation">,</span> onRejected</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">const</span> _this <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
		
		<span class="token comment">// хИдцЦнхЫЮш░ГхЗ╜цХ░хПВцХ░</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onRejected <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">onRejected</span> <span class="token operator">=</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
				<span class="token keyword">throw</span> reason<span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span>
		
		<span class="token comment">// хИдцЦнхЫЮш░ГхЗ╜цХ░хПВцХ░</span>
		<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> onResolved <span class="token operator">!==</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token function-variable function">onResolved</span> <span class="token operator">=</span> <span class="token parameter">value</span> <span class="token operator">=&gt;</span> value<span class="token punctuation">;</span>
		<span class="token punctuation">}</span>
		
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token comment">// х░БшгЕхЗ╜цХ░</span>
			<span class="token keyword">function</span> <span class="token function">callback</span><span class="token punctuation">(</span><span class="token parameter">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token keyword">try</span> <span class="token punctuation">{</span>
					<span class="token comment">// шО╖хПЦхЫЮш░ГхЗ╜цХ░цЙзшбМч╗УцЮЬ</span>
					<span class="token keyword">let</span> result <span class="token operator">=</span> <span class="token function">type</span><span class="token punctuation">(</span>_this<span class="token punctuation">.</span>promiseResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token comment">// хИдцЦн</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>result <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// хжВцЮЬцШп Promise ч▒╗хЮЛчЪДхп╣ш▒б</span>
						result<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
							<span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
							<span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
						<span class="token punctuation">}</span><span class="token punctuation">)</span>
					<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
						<span class="token comment">// ч╗УцЮЬчЪДхп╣ш▒бчК╢цАБф╕║уАРцИРхКЯуАС</span>
						<span class="token function">resolve</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
					<span class="token function">reject</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">// ш░ГчФихЫЮш░ГхЗ╜цХ░</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>promiseState <span class="token operator">===</span> <span class="token string">'fulfilled'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">callback</span><span class="token punctuation">(</span>onResolved<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>promiseState <span class="token operator">===</span> <span class="token string">'rejected'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">callback</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
			
			<span class="token comment">// хИдцЦн pending чК╢цАБ</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>promiseState <span class="token operator">===</span> <span class="token string">'pending'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				<span class="token comment">// ф┐ЭхнШхЫЮш░ГхЗ╜цХ░</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span>callbacks<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					<span class="token function-variable function">onResolved</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">callback</span><span class="token punctuation">(</span>onResolved<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span><span class="token punctuation">,</span>
					<span class="token function-variable function">onRejected</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token function">callback</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// catchцЦ╣ц│Х</span>
	<span class="token keyword">catch</span><span class="token punctuation">(</span>onRejected<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">undefined</span><span class="token punctuation">,</span> onRejected<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// resolveцЦ╣ц│Х</span>
	<span class="token keyword">static</span> <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token keyword">instanceof</span> <span class="token class-name">Promise</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
				value<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
				<span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// rejectцЦ╣ц│Х</span>
	<span class="token keyword">static</span> <span class="token function">reject</span><span class="token punctuation">(</span><span class="token parameter">reason</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// allцЦ╣ц│Х</span>
	<span class="token keyword">static</span> <span class="token function">all</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">let</span> cnt <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
			<span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">// х╛ЧчЯехп╣ш▒бчЪДчК╢цАБцШпцИРхКЯ</span>
					<span class="token comment">// цпПф╕кpromiseхп╣ш▒бщГ╜цИРхКЯ</span>
					cnt<span class="token operator">++</span><span class="token punctuation">;</span>
					res<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> value<span class="token punctuation">;</span>
					<span class="token keyword">if</span> <span class="token punctuation">(</span>cnt <span class="token operator">===</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token punctuation">{</span>
						<span class="token comment">// ф┐оцФ╣чК╢цАБ</span>
						<span class="token function">resolve</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">;</span>
					<span class="token punctuation">}</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	
	<span class="token comment">// raceцЦ╣ц│Х</span>
	<span class="token keyword">static</span> <span class="token function">race</span><span class="token punctuation">(</span><span class="token parameter">promises</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
			<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> promises<span class="token punctuation">.</span>length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
				promises<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">value</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">// ф┐оцФ╣ш┐ФхЫЮхп╣ш▒бчЪДчК╢цАБф╕║уАРцИРхКЯуАС</span>
					<span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token parameter">reason</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
					<span class="token comment">// ф┐оцФ╣ш┐ФхЫЮхп╣ш▒бчЪДчК╢цАБф╕║уАРхд▒ш┤еуАС</span>
					<span class="token function">reject</span><span class="token punctuation">(</span>reason<span class="token punctuation">)</span><span class="token punctuation">;</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h1 id="async-ф╕О-await"><a href="#async-ф╕О-await" class="header-anchor">#</a> async ф╕О await</h1> <ul><li>romise ==&gt; х╝Вцне</li> <li>await ==&gt; х╝Вцнеш╜мхРМцне
<ul><li>await хПпф╗ечРЖшзгф╕║цШп async wait чЪДчоАхЖЩуАВawait х┐Ещб╗хЗ║чО░хЬи async хЗ╜цХ░хЖЕщГия╝Мф╕НшГ╜хНХчЛмф╜┐чФиуАВ</li> <li>await хРОщЭвхПпф╗еш╖Яф╗╗ф╜ХчЪДJS шбиш╛╛х╝ПуАВшЩ╜чД╢шп┤ await хПпф╗ечнЙх╛ИхдЪч▒╗хЮЛчЪДф╕Ьше┐я╝Мф╜ЖцШпхоГцЬАф╕╗шжБчЪДцДПхЫ╛цШпчФицЭечнЙх╛Е Promise хп╣ш▒бчЪДчК╢цАБшвл resolvedуАВхжВцЮЬawaitчЪДцШп promiseхп╣ш▒бф╝ЪщАацИРх╝ВцнехЗ╜цХ░хБЬцнвцЙзшбМх╣╢ф╕ФчнЙх╛Е promise чЪДшзгхЖ│,хжВцЮЬчнЙчЪДцШпцнгх╕╕чЪДшбиш╛╛х╝ПхИЩчлЛхН│цЙзшбМ</li></ul></li> <li>async ==&gt; хРМцнеш╜мх╝Вцне
<ul><li>цЦ╣ц│Хф╜УхЖЕщГичЪДцЯРф╕кшбиш╛╛х╝Пф╜┐чФиawaitф┐още░я╝МщВгф╣Иш┐Щф╕кцЦ╣ц│Хф╜УцЙАх▒ЮцЦ╣ц│Хх┐Ещб╗шжБчФиasyncф┐още░цЙАф╗еф╜┐чФиawitцЦ╣ц│Хф╝ЪшЗкхКихНЗч║зф╕║х╝ВцнецЦ╣ц│Х</li></ul></li></ul> <h2 id="mdnцЦЗцбг"><a href="#mdnцЦЗцбг" class="header-anchor">#</a> MDNцЦЗцбг</h2> <ul><li><a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FStatements%2Fasync_function" target="_blank" rel="noopener noreferrer">async<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://gitee.com/link?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fzh-CN%2Fdocs%2FWeb%2FJavaScript%2FReference%2FOperators%2Fawait" target="_blank" rel="noopener noreferrer">await<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul> <h2 id="asyncхЗ╜цХ░"><a href="#asyncхЗ╜цХ░" class="header-anchor">#</a> asyncхЗ╜цХ░</h2> <ul><li>хЗ╜цХ░чЪДш┐ФхЫЮхА╝ф╕║promiseхп╣ш▒б</li> <li>promiseхп╣ш▒бчЪДч╗УцЮЬчФ▒asyncхЗ╜цХ░цЙзшбМчЪДш┐ФхЫЮхА╝хЖ│хоЪ</li></ul> <h2 id="awaitшбиш╛╛х╝П"><a href="#awaitшбиш╛╛х╝П" class="header-anchor">#</a> awaitшбиш╛╛х╝П</h2> <ul><li>awaitхП│ф╛зчЪДшбиш╛╛х╝Пф╕АшИмф╕║promiseхп╣ш▒бя╝Мф╜Жф╣ЯхПпф╗ецШпхЕ╢ф╗ЦчЪДхА╝</li> <li>хжВцЮЬшбиш╛╛х╝ПцШпpromiseхп╣ш▒бя╝Мawaitш┐ФхЫЮчЪДцШпpromiseцИРхКЯчЪДхА╝</li> <li>хжВцЮЬшбиш╛╛х╝ПцШпхЕ╢ф╗ЦхА╝я╝МчЫ┤цОех░ЖцндхА╝ф╜Ьф╕║awaitчЪДш┐ФхЫЮхА╝</li></ul> <h2 id="ц│ицДП"><a href="#ц│ицДП" class="header-anchor">#</a> ц│ицДП</h2> <ul><li>awaitх┐Ещб╗хЖЩхЬиasyncхЗ╜цХ░ф╕ня╝Мф╜ЖasyncхЗ╜цХ░ф╕нхПпф╗ец▓бцЬЙawait</li> <li>хжВцЮЬawaitчЪДpromiseхд▒ш┤еф║Жя╝Мх░▒ф╝ЪцКЫхЗ║х╝Вх╕╕я╝МщЬАшжБщАЪш┐З<code>try...catch</code>цНХшО╖хдДчРЖ</li></ul> <h1 id="хоПф╗╗хКбф╕Ох╛оф╗╗хКб-2"><a href="#хоПф╗╗хКбф╕Ох╛оф╗╗хКб-2" class="header-anchor">#</a> хоПф╗╗хКбф╕Ох╛оф╗╗хКб</h1> <h2 id="шп┤цШО"><a href="#шп┤цШО" class="header-anchor">#</a> шп┤цШО</h2> <ul><li>хОЯчРЖхЫ╛
<img src="https://gitee.com/yelishu/note/raw/master/noteImgs_2/202307091148275.png" alt="image.png"></li></ul> <p><mark style="background:#FF5582A6;">шп┤цШО</mark></p> <ul><li>JSф╕нчФицЭехнШхВицЙзшбМхЫЮш░ГхЗ╜цХ░чЪДщШЯхИЧхМЕхРлф╕дф╕кф╕НхРМчЙ╣чВ╣чЪДщШЯхИЧ
<ul><li><code>хоПщШЯхИЧ</code>я╝ЪчФицЭеф┐ЭхнШцЙзшбМчЪДхоПф╗╗хКбя╝ИхЫЮш░Гя╝Йя╝МцпФхжВ<span style="color:#ff0000;">хоЪцЧ╢хЩихЫЮш░Г/AJAXхЫЮш░Г/DOMф║Лф╗╢хЫЮш░Г</span></li> <li><code>х╛оф╗╗хКб</code>я╝ЪчФицЭеф┐ЭхнШх╛ЕцЙзшбМчЪДх╛оф╗╗хКбя╝ИхЫЮш░Гя╝Йя╝МцпФхжВ<span style="color:#ff0000;">PromiseчЪДхЫЮш░Г/muntationхЫЮш░Г</span></li></ul></li> <li>JSцЙзшбМцЧ╢ф╝ЪхМ║хИлш┐Щф╕дф╕кщШЯхИЧ
<ul><li>JSцЙзшбМх╝ХцУОщжЦхЕИх┐Ещб╗цЙзшбМцЙАцЬЙчЪД<code>хИЭхзЛхМЦхРМцнеф╗╗хКб</code>ф╗гчаБ</li> <li>цпПцмбхЗЖхдЗхПЦхЗ║чммф╕Аф╕к<code>хоПф╗╗хКбцЙзшбМхЙН</code>я╝МщГ╜шжБх░ЖцЙАцЬЙчЪД<code>х╛оф╗╗хКб</code>ф╕Аф╕кф╕Аф╕кхПЦхЗ║цЭецЙзшбМ</li></ul></li></ul></div></section> <footer class="page-edit"><!----> <!----></footer> <!----> <div class="comments-wrapper"><!----></div></main></div> <!----></div> <ul class="sub-sidebar sub-sidebar-wrapper" style="width:12rem;" data-v-b57cc07c data-v-7dd95ae2><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#promiseцШпф╗Аф╣И" class="sidebar-link reco-side-promiseцШпф╗Аф╣И" data-v-b57cc07c>PromiseцШпф╗Аф╣Ия╝Я</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#чРЖшзг" class="sidebar-link reco-side-чРЖшзг" data-v-b57cc07c>чРЖшзг</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#х╝Вцнеч╝ЦчиЛ" class="sidebar-link reco-side-х╝Вцнеч╝ЦчиЛ" data-v-b57cc07c>х╝Вцнеч╝ЦчиЛ</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#promiseчЪДчК╢цАБцФ╣хПШ" class="sidebar-link reco-side-promiseчЪДчК╢цАБцФ╣хПШ" data-v-b57cc07c>PromiseчЪДчК╢цАБцФ╣хПШ</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#promiseчЪДхЯ║цЬмц╡БчиЛ" class="sidebar-link reco-side-promiseчЪДхЯ║цЬмц╡БчиЛ" data-v-b57cc07c>PromiseчЪДхЯ║цЬмц╡БчиЛ</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#promiseчЪДхЯ║цЬмф╜┐чФи" class="sidebar-link reco-side-promiseчЪДхЯ║цЬмф╜┐чФи" data-v-b57cc07c>PromiseчЪДхЯ║цЬмф╜┐чФи</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#ф╕║ф╗Аф╣ИшжБчФиpromise" class="sidebar-link reco-side-ф╕║ф╗Аф╣ИшжБчФиpromise" data-v-b57cc07c>ф╕║ф╗Аф╣ИшжБчФиPromiseя╝Я</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#цМЗхоЪхЫЮш░ГхЗ╜цХ░чЪДцЦ╣х╝ПцЫ┤хКачБ╡ц┤╗" class="sidebar-link reco-side-цМЗхоЪхЫЮш░ГхЗ╜цХ░чЪДцЦ╣х╝ПцЫ┤хКачБ╡ц┤╗" data-v-b57cc07c>цМЗхоЪхЫЮш░ГхЗ╜цХ░чЪДцЦ╣х╝ПцЫ┤хКачБ╡ц┤╗</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#цФпцМБщУ╛х╝Пш░ГчФи-хПпф╗ешзгхЖ│хЫЮш░ГхЬ░чЛ▒щЧощвШ" class="sidebar-link reco-side-цФпцМБщУ╛х╝Пш░ГчФи-хПпф╗ешзгхЖ│хЫЮш░ГхЬ░чЛ▒щЧощвШ" data-v-b57cc07c>цФпцМБщУ╛х╝Пш░ГчФия╝МхПпф╗ешзгхЖ│хЫЮш░ГхЬ░чЛ▒щЧощвШ</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#хжВф╜Хф╜┐чФиpromise" class="sidebar-link reco-side-хжВф╜Хф╜┐чФиpromise" data-v-b57cc07c>хжВф╜Хф╜┐чФиPromiseя╝Я</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#api" class="sidebar-link reco-side-api" data-v-b57cc07c>API</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#promiseчЪДхЗаф╕кхЕ│щФощЧощвШ" class="sidebar-link reco-side-promiseчЪДхЗаф╕кхЕ│щФощЧощвШ" data-v-b57cc07c>PromiseчЪДхЗаф╕кхЕ│щФощЧощвШ</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#promiseчЪДхоЮщЩЕх║ФчФи" class="sidebar-link reco-side-promiseчЪДхоЮщЩЕх║ФчФи" data-v-b57cc07c>PromiseчЪДхоЮщЩЕх║ФчФи</a></li><li class="level-3" data-v-b57cc07c><a href="/blogs/blogs/9.html#хоПф╗╗хКбф╕Ох╛оф╗╗хКб" class="sidebar-link reco-side-хоПф╗╗хКбф╕Ох╛оф╗╗хКб" data-v-b57cc07c>хоПф╗╗хКбф╕Ох╛оф╗╗хКб</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#mdnцЦЗцбг" class="sidebar-link reco-side-mdnцЦЗцбг" data-v-b57cc07c>MDNцЦЗцбг</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#asyncхЗ╜цХ░" class="sidebar-link reco-side-asyncхЗ╜цХ░" data-v-b57cc07c>asyncхЗ╜цХ░</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#awaitшбиш╛╛х╝П" class="sidebar-link reco-side-awaitшбиш╛╛х╝П" data-v-b57cc07c>awaitшбиш╛╛х╝П</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#ц│ицДП" class="sidebar-link reco-side-ц│ицДП" data-v-b57cc07c>ц│ицДП</a></li><li class="level-2" data-v-b57cc07c><a href="/blogs/blogs/9.html#шп┤цШО" class="sidebar-link reco-side-шп┤цШО" data-v-b57cc07c>шп┤цШО</a></li></ul></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div></div><div class="Sakura" data-v-248d85d6><canvas id="canvas_sakura" style="z-index:-1;" data-v-248d85d6></canvas></div><canvas id="vuepress-canvas-cursor"></canvas><div class="reco-bgm-panel" data-v-b1d3339e><audio id="bgm" src="https://yelishu.gitee.io/blogs/bg.mp3" data-v-b1d3339e></audio> <div class="reco-float-box" style="bottom:20px;z-index:999999;display:none;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><img src="https://p2.music.126.net/ZvYHj8W72RwrnOJiOGaL9g==/109951163074555333.jpg?param=130y130" data-v-b1d3339e></div> <div class="reco-bgm-box" style="left:10px;bottom:10px;z-index:999999;" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="reco-bgm-cover" style="background-image:url(https://p2.music.126.net/ZvYHj8W72RwrnOJiOGaL9g==/109951163074555333.jpg?param=130y130);" data-v-b1d3339e><div class="mini-operation" style="display:none;" data-v-b1d3339e><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-b1d3339e></i></div> <div class="falut-message" style="display:none;" data-v-b1d3339e>
          цТнцФ╛хд▒ш┤е
        </div></div> <div class="reco-bgm-info" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-music music" data-v-b1d3339e></i>тЭА</div> <div class="info-box" data-v-b1d3339e><i class="reco-bgm reco-bgm-artist" data-v-b1d3339e></i>nevva</div> <div class="reco-bgm-progress" data-v-b1d3339e><div class="progress-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div> <div class="reco-bgm-operation" data-v-b1d3339e><i class="reco-bgm reco-bgm-last last" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-play play" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-next next" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-b1d3339e></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-b1d3339e></i> <div class="volume-bar" data-v-b1d3339e><div class="bar" data-v-b1d3339e></div></div></div></div> <div class="reco-bgm-left-box" data-v-b1d3339e data-v-41bcba48 data-v-b1d3339e><i class="reco-bgm reco-bgm-left" data-v-b1d3339e></i></div></div></div></div></div>
    <script src="/blogs/assets/js/app.b10d3b76.js" defer></script><script src="/blogs/assets/js/7.51cf2bb3.js" defer></script><script src="/blogs/assets/js/2.90913472.js" defer></script><script src="/blogs/assets/js/1.c35ebe2c.js" defer></script><script src="/blogs/assets/js/70.66e490da.js" defer></script>
  </body>
</html>
